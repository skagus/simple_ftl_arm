OS 적용된 것과 FSM으로 돌린 것의 성능 비교를 해 보았다. 
SoC는 stm32f103(cortex m3), compiler는 arm gcc를 사용하였다.

FTL의 구현은 최대한 단순하게 하였으며, 실제 NAND가 없기 때문에 memory상에서 spare 값만 관리하였다. 
rebuild는 지원이 안되기 때문에, test 시작시 format을 하며, 이 시간은 측정하지 않았다. 
측정 내용은, SW, SR, RR, RW 를 모두 진행하였으며, 
RW의 경우, GC가 없는 초기 성능을 보기 위해서 짧게 나누어서 여러번 수행하였다. 

os와 fsm 공히 compile option은 동일하며, optimize level만 바꿔어 가면서 test하였다. 
그리고 OS에서 Ofast2 는 OS의 context switch를 좀더 최적화 한 버전이다. 
(동작에 이상이 없으니, 최적화 버전을 최종으로 생각하면 된다.)

OS Ofast2와 FSM Ofast 와 비교를 해 보면, 
SW 에서 OS가 6% 우세.
첫번째 RW에서 OS가 19% 우세.
두번째 RW에서 FSM이 5% 우세.
마지막 RW에서는 FSM이 15% 우세.

LTO가 적용된 경우에는 FSM이 전체적으로 우세한 모습을 보이고 있다. 
OS가 결합되면 context change로 인하여, optimize가 잘 안되기 때문인 것 같다.



결과:
	OS							FSM							Ratio	1보다 크면, FSM이 우위				
	O0	O2	O3	Ofast	O3 lto	Ofast lto		O0	O2	O3	Ofast	O3 lto	Ofast lto		O0	O2	O3	Ofast	O3 lto	Ofast lto
SW:	2147709	917362	850010	822584	687132	709326		2254394	973944	877767	877722	709640	723326		0.953	0.942	0.968	0.937	0.968	0.981
SR:	1707154	685921	617076	595192	491502	495030		1730384	692377	605878	605869	490488	487836		0.987	0.991	1.018	0.982	1.002	1.015
RR:	1737495	714655	645501	623584	528267	529795		1758025	720043	633816	633857	518101	516554		0.988	0.993	1.018	0.984	1.020	1.026
RW:	363669	158604	147261	143558	123607	126780		407557	182368	170955	170957	134925	138341		0.892	0.870	0.861	0.840	0.916	0.916
RW:	1132928	500053	466143	454971	375596	386241		1039920	446155	429776	429778	323012	328798		1.089	1.121	1.085	1.059	1.163	1.175
RW:	1561083	688804	642696	627151	515164	529697		1534866	649980	624748	624758	467189	474286		1.017	1.060	1.029	1.004	1.103	1.117
RW:	1488305	657137	612994	597927	491460	505085		1516863	643108	618100	618138	462492	469555		0.981	1.022	0.992	0.967	1.063	1.076
RW:	1305535	574653	535574	522510	430421	441975		1252628	531432	511284	511282	382744	388440		1.042	1.081	1.048	1.022	1.125	1.138
RW:	1462765	646222	602764	587947	482872	496274		1396552	593377	570538	570538	427232	433921		1.047	1.089	1.056	1.031	1.130	1.144
RW:	1410548	623190	581005	566553	465474	478118		1416704	601330	578102	578113	432754	439437		0.996	1.036	1.005	0.980	1.076	1.088
RW:	1491993	660868	616625	601556	494290	508468		1238472	528627	508500	508515	381849	388144		1.205	1.250	1.213	1.183	1.294	1.310
Sum	15809184	6827469	6317649	6143533	5085785	5206789		15546365	6562741	6129464	6129527	4730426	4788638		1.017	1.040	1.031	1.002	1.075	1.087
																